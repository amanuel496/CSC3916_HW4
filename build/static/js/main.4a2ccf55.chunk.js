(this["webpackJsonpcsc3916-hw5"]=this["webpackJsonpcsc3916-hw5"]||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(13),o=n.n(i),r=(n(50),n(51),n(14)),c=n(15),l=n(18),u=n(17),d=n(67),j=n(69),h=n(29),b=n(11),O={USER_LOGGEDIN:"USER_LOGGEDIN",USER_LOGOUT:"USER_LOGOUT",FETCH_MOVIES:"FETCH_MOVIES",FETCH_MOVIE:"FETCH_MOVIE",SET_MOVIE:"SET_MOVIE"},g=n(37),p=n.n(g);function v(e){var t=p()();return function(n){return fetch("".concat(t.REACT_APP_API_URL,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e),mode:"cors"}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(t){var a;localStorage.setItem("username",e.username),localStorage.setItem("token",t.token),n((a=e.username,{type:O.USER_LOGGEDIN,username:a}))})).catch((function(e){return console.log(e)}))}}function m(){return function(e){localStorage.removeItem("username"),localStorage.removeItem("token"),e({type:O.USER_LOGOUT})}}var x=n(3),f=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"logout",value:function(){this.props.dispatch(m())}},{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsxs)(d.a,{expand:"lg",bg:"dark",variant:"dark",children:[Object(x.jsx)(d.a.Brand,{children:"Movie App"}),Object(x.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsx)(d.a.Collapse,{id:"basic-navbar-nav",children:Object(x.jsxs)(j.a,{children:[Object(x.jsx)(h.LinkContainer,{to:"/movielist",children:Object(x.jsx)(j.a.Link,{disabled:!this.props.loggedIn,children:"Movie List"})}),Object(x.jsx)(h.LinkContainer,{to:"/movie/"+(this.props.selectedMovie?this.props.selectedMovie._id:""),children:Object(x.jsx)(j.a.Link,{disabled:!this.props.loggedIn,children:"Movie Detail"})}),Object(x.jsx)(h.LinkContainer,{to:"/signin",children:Object(x.jsx)(j.a.Link,{children:this.props.loggedIn?Object(x.jsx)("button",{onClick:this.logout.bind(this),children:"Logout"}):"Login"})})]})})]})})}}]),n}(a.Component),I=Object(b.b)((function(e){return{loggedIn:e.auth.loggedIn,username:e.auth.username,selectedMovie:""}}))(f),E=n(19),C=n(68),k=n(66),S=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).updateDetails=a.updateDetails.bind(Object(E.a)(a)),a.login=a.login.bind(Object(E.a)(a)),a.state={details:{username:"",password:""}},a}return Object(c.a)(n,[{key:"updateDetails",value:function(e){var t=Object.assign({},this.state.details);t[e.target.id]=e.target.value,this.setState({details:t})}},{key:"login",value:function(){(0,this.props.dispatch)(v(this.state.details))}},{key:"render",value:function(){return Object(x.jsxs)(C.a,{className:"form-horizontal",children:[Object(x.jsxs)(C.a.Group,{controlId:"username",children:[Object(x.jsx)(C.a.Label,{children:"Email"}),Object(x.jsx)(C.a.Control,{onChange:this.updateDetails,value:this.state.details.username,type:"email",placeholder:"Enter email"})]}),Object(x.jsxs)(C.a.Group,{controlId:"password",children:[Object(x.jsx)(C.a.Label,{children:"Password"}),Object(x.jsx)(C.a.Control,{onChange:this.updateDetails,value:this.state.details.password,type:"password",placeholder:"Password"})]}),Object(x.jsx)(k.a,{onClick:this.login,children:"Sign in"})]})}}]),n}(a.Component),y=Object(b.b)((function(e){return{}}))(S),L=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).updateDetails=a.updateDetails.bind(Object(E.a)(a)),a.register=a.register.bind(Object(E.a)(a)),a.state={details:{name:"",username:"",password:""}},a}return Object(c.a)(n,[{key:"updateDetails",value:function(e){var t=Object.assign({},this.state.details);t[e.target.id]=e.target.value,this.setState({details:t})}},{key:"register",value:function(){(0,this.props.dispatch)(function(e){var t=p()();return function(n){return fetch("".concat(t.REACT_APP_API_URL,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e),mode:"cors"}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(t){n(v(e))})).catch((function(e){return console.log(e)}))}}(this.state.details))}},{key:"render",value:function(){return Object(x.jsxs)(C.a,{className:"form-horizontal",children:[Object(x.jsxs)(C.a.Group,{controlId:"name",children:[Object(x.jsx)(C.a.Label,{children:"Name"}),Object(x.jsx)(C.a.Control,{onChange:this.updateDetails,value:this.state.details.name,type:"text",placeholder:"Name"})]}),Object(x.jsxs)(C.a.Group,{controlId:"username",children:[Object(x.jsx)(C.a.Label,{children:"Email"}),Object(x.jsx)(C.a.Control,{onChange:this.updateDetails,value:this.state.details.username,type:"email",placeholder:"Enter email"})]}),Object(x.jsxs)(C.a.Group,{controlId:"password",children:[Object(x.jsx)(C.a.Label,{children:"Password"}),Object(x.jsx)(C.a.Control,{onChange:this.updateDetails,value:this.state.details.password,type:"password",placeholder:"Password"})]}),Object(x.jsx)(k.a,{onClick:this.register,children:"Register"})]})}}]),n}(a.Component),w=Object(b.b)((function(e){return{}}))(L),T=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={toggleReg:!1},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"showLogin",value:function(){this.setState({toggleReg:!1})}},{key:"showReg",value:function(){this.setState({toggleReg:!0})}},{key:"logout",value:function(){this.props.dispatch(m())}},{key:"render",value:function(){var e=Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:this.showLogin.bind(this),children:"Login"}),Object(x.jsx)("button",{onClick:this.showReg.bind(this),children:"Register"}),this.state.toggleReg?Object(x.jsx)(w,{}):Object(x.jsx)(y,{})]}),t=Object(x.jsxs)("div",{children:["Logged in as: ",this.props.username," ",Object(x.jsx)("button",{onClick:this.logout.bind(this),children:"Logout"})]});return Object(x.jsx)("div",{children:this.props.loggedIn?t:e})}}]),n}(a.Component),_=Object(b.b)((function(e){return{loggedIn:e.auth.loggedIn,username:e.auth.username}}))(T),M=n(24),R=n(6),D=n(21),G=n(45),P={loggedIn:!!localStorage.getItem("token"),username:localStorage.getItem("username")?localStorage.getItem("username"):""},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e);switch(t.type){case O.USER_LOGGEDIN:return n.loggedIn=!0,n.username=t.username,n;case O.USER_LOGOUT:return n.loggedIn=!1,n.username="",n;default:return e}},N={movies:[],selectedMovie:null},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e);switch(t.type){case O.FETCH_MOVIES:return n.movies=t.movies,n.selectedMovie=t.movies[0],n;case O.SET_MOVIE:case O.FETCH_MOVIE:return n.selectedMovie=t.selectedMovie,n;default:return e}},F=[G.a],V=Object(D.d)(Object(D.c)({auth:U,movie:A}),D.a.apply(void 0,F));var H=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(b.a,{store:V,children:Object(x.jsx)(M.HashRouter,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)(I,{}),Object(x.jsx)(R.d,{exact:!0,path:"/",render:function(){return Object(x.jsx)("p",{})}}),Object(x.jsx)(R.d,{exact:!0,path:"/movielist",render:function(){return Object(x.jsx)("p",{})}}),Object(x.jsx)(R.d,{exact:!0,path:"/movie/:movieId",render:function(){return Object(x.jsx)("p",{})}}),Object(x.jsx)(R.d,{path:"/signin",render:function(){return Object(x.jsx)(_,{})}})]})})})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),i(e),o(e)}))};o.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(H,{})}),document.getElementById("root")),J()}},[[64,1,2]]]);
//# sourceMappingURL=main.4a2ccf55.chunk.js.map
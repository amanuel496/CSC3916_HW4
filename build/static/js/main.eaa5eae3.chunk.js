(this["webpackJsonpcsc3916-hw5"]=this["webpackJsonpcsc3916-hw5"]||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),i=n(13),o=n.n(i),r=(n(50),n(51),n(14)),c=n(15),l=n(18),u=n(17),d=n(67),h=n(69),j=n(29),b=n(11),p={USER_LOGGEDIN:"USER_LOGGEDIN",USER_LOGOUT:"USER_LOGOUT",FETCH_MOVIES:"FETCH_MOVIES",FETCH_MOVIE:"FETCH_MOVIE",SET_MOVIE:"SET_MOVIE"},O=n(37),g=n.n(O);function v(e){g()();return function(t){return fetch("https://hw3-amanuel.herokuapp.com/users/signin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e),mode:"cors"}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(n){var s;localStorage.setItem("username",e.username),localStorage.setItem("token",n.token),t((s=e.username,{type:p.USER_LOGGEDIN,username:s}))})).catch((function(e){return console.log(e)}))}}function m(){return function(e){localStorage.removeItem("username"),localStorage.removeItem("token"),e({type:p.USER_LOGOUT})}}var x=n(3),f=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"logout",value:function(){this.props.dispatch(m())}},{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsxs)(d.a,{expand:"lg",bg:"dark",variant:"dark",children:[Object(x.jsx)(d.a.Brand,{children:"Movie App"}),Object(x.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsx)(d.a.Collapse,{id:"basic-navbar-nav",children:Object(x.jsxs)(h.a,{children:[Object(x.jsx)(j.LinkContainer,{to:"/movielist",children:Object(x.jsx)(h.a.Link,{disabled:!this.props.loggedIn,children:"Movie List"})}),Object(x.jsx)(j.LinkContainer,{to:"/movie/"+(this.props.selectedMovie?this.props.selectedMovie._id:""),children:Object(x.jsx)(h.a.Link,{disabled:!this.props.loggedIn,children:"Movie Detail"})}),Object(x.jsx)(j.LinkContainer,{to:"/signin",children:Object(x.jsx)(h.a.Link,{children:this.props.loggedIn?Object(x.jsx)("button",{onClick:this.logout.bind(this),children:"Logout"}):"Login"})})]})})]})})}}]),n}(s.Component),I=Object(b.b)((function(e){return{loggedIn:e.auth.loggedIn,username:e.auth.username,selectedMovie:""}}))(f),k=n(19),E=n(68),C=n(66),S=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).updateDetails=s.updateDetails.bind(Object(k.a)(s)),s.login=s.login.bind(Object(k.a)(s)),s.state={details:{username:"",password:""}},s}return Object(c.a)(n,[{key:"updateDetails",value:function(e){var t=Object.assign({},this.state.details);t[e.target.id]=e.target.value,this.setState({details:t})}},{key:"login",value:function(){(0,this.props.dispatch)(v(this.state.details))}},{key:"render",value:function(){return Object(x.jsxs)(E.a,{className:"form-horizontal",children:[Object(x.jsxs)(E.a.Group,{controlId:"username",children:[Object(x.jsx)(E.a.Label,{children:"Email"}),Object(x.jsx)(E.a.Control,{onChange:this.updateDetails,value:this.state.details.username,type:"email",placeholder:"Enter email"})]}),Object(x.jsxs)(E.a.Group,{controlId:"password",children:[Object(x.jsx)(E.a.Label,{children:"Password"}),Object(x.jsx)(E.a.Control,{onChange:this.updateDetails,value:this.state.details.password,type:"password",placeholder:"Password"})]}),Object(x.jsx)(C.a,{onClick:this.login,children:"Sign in"})]})}}]),n}(s.Component),y=Object(b.b)((function(e){return{}}))(S),L=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).updateDetails=s.updateDetails.bind(Object(k.a)(s)),s.register=s.register.bind(Object(k.a)(s)),s.state={details:{name:"",username:"",password:""}},s}return Object(c.a)(n,[{key:"updateDetails",value:function(e){var t=Object.assign({},this.state.details);t[e.target.id]=e.target.value,this.setState({details:t})}},{key:"register",value:function(){var e;(0,this.props.dispatch)((e=this.state.details,g()(),function(t){return fetch("https://hw3-amanuel.herokuapp.com/users/signup",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e),mode:"cors"}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(n){t(v(e))})).catch((function(e){return console.log(e)}))}))}},{key:"render",value:function(){return Object(x.jsxs)(E.a,{className:"form-horizontal",children:[Object(x.jsxs)(E.a.Group,{controlId:"name",children:[Object(x.jsx)(E.a.Label,{children:"Name"}),Object(x.jsx)(E.a.Control,{onChange:this.updateDetails,value:this.state.details.name,type:"text",placeholder:"Name"})]}),Object(x.jsxs)(E.a.Group,{controlId:"username",children:[Object(x.jsx)(E.a.Label,{children:"Email"}),Object(x.jsx)(E.a.Control,{onChange:this.updateDetails,value:this.state.details.username,type:"email",placeholder:"Enter email"})]}),Object(x.jsxs)(E.a.Group,{controlId:"password",children:[Object(x.jsx)(E.a.Label,{children:"Password"}),Object(x.jsx)(E.a.Control,{onChange:this.updateDetails,value:this.state.details.password,type:"password",placeholder:"Password"})]}),Object(x.jsx)(C.a,{onClick:this.register,children:"Register"})]})}}]),n}(s.Component),w=Object(b.b)((function(e){return{}}))(L),T=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={toggleReg:!1},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"showLogin",value:function(){this.setState({toggleReg:!1})}},{key:"showReg",value:function(){this.setState({toggleReg:!0})}},{key:"logout",value:function(){this.props.dispatch(m())}},{key:"render",value:function(){var e=Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:this.showLogin.bind(this),children:"Login"}),Object(x.jsx)("button",{onClick:this.showReg.bind(this),children:"Register"}),this.state.toggleReg?Object(x.jsx)(w,{}):Object(x.jsx)(y,{})]}),t=Object(x.jsxs)("div",{children:["Logged in as: ",this.props.username," ",Object(x.jsx)("button",{onClick:this.logout.bind(this),children:"Logout"})]});return Object(x.jsx)("div",{children:this.props.loggedIn?t:e})}}]),n}(s.Component),M=Object(b.b)((function(e){return{loggedIn:e.auth.loggedIn,username:e.auth.username}}))(T),D=n(24),_=n(6),G=n(21),R=n(45),U={loggedIn:!!localStorage.getItem("token"),username:localStorage.getItem("username")?localStorage.getItem("username"):""},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e);switch(t.type){case p.USER_LOGGEDIN:return n.loggedIn=!0,n.username=t.username,n;case p.USER_LOGOUT:return n.loggedIn=!1,n.username="",n;default:return e}},F={movies:[],selectedMovie:null},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e);switch(t.type){case p.FETCH_MOVIES:return n.movies=t.movies,n.selectedMovie=t.movies[0],n;case p.SET_MOVIE:case p.FETCH_MOVIE:return n.selectedMovie=t.selectedMovie,n;default:return e}},P=[R.a],H=Object(G.d)(Object(G.c)({auth:N,movie:V}),G.a.apply(void 0,P));var A=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(b.a,{store:H,children:Object(x.jsx)(D.HashRouter,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)(I,{}),Object(x.jsx)(_.d,{exact:!0,path:"/",render:function(){return Object(x.jsx)("p",{})}}),Object(x.jsx)(_.d,{exact:!0,path:"/movielist",render:function(){return Object(x.jsx)("p",{})}}),Object(x.jsx)(_.d,{exact:!0,path:"/movie/:movieId",render:function(){return Object(x.jsx)("p",{})}}),Object(x.jsx)(_.d,{path:"/signin",render:function(){return Object(x.jsx)(M,{})}})]})})})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),s(e),a(e),i(e),o(e)}))};o.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(A,{})}),document.getElementById("root")),J()}},[[64,1,2]]]);
//# sourceMappingURL=main.eaa5eae3.chunk.js.map